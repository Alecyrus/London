function tocify(r,d,c,t){"use strict";var o="tocify",n="tocify-hide",a="tocify-header",i="."+a,l="tocify-subheader",h="."+l,f="tocify-item",u="."+f,p="tocify-extend-page";r.widget("toc.tocify",{version:"1.9.0",options:{context:"body",ignoreSelector:null,selectors:"h1, h2, h3",showAndHide:!0,showEffect:"slideDown",showEffectSpeed:"medium",hideEffect:"slideUp",hideEffectSpeed:"medium",smoothScroll:!0,smoothScrollSpeed:"medium",scrollTo:0,showAndHideOnScroll:!0,highlightOnScroll:!0,highlightOffset:40,theme:"bootstrap",extendPage:!0,extendPageOffset:100,history:!0,scrollHistory:!1,hashGenerator:"compact",highlightDefault:!0},_init:function(){var t=this;t.extendPageScroll=!0,t.items=[],t._generateToc(),t._addCSSClasses(),t.webkit=function(){for(var t in d)if(t&&-1!==t.toLowerCase().indexOf("webkit"))return!0;return!1}(),t._setEventHandlers(),r(d).on("load",function(){t._setActiveElement(!0),r("html, body").promise().done(function(){setTimeout(function(){t.extendPageScroll=!1},0)})})},_generateToc:function(){var t,e,s=this,i=s.options.ignoreSelector;(t=-1!==this.options.selectors.indexOf(",")?r(this.options.context).find(this.options.selectors.replace(/ /g,"").substr(0,this.options.selectors.indexOf(","))):r(this.options.context).find(this.options.selectors.replace(/ /g,""))).length?(s.element.addClass(o),t.each(function(t){r(this).is(i)||(e=r("<ul/>",{id:a+t,class:a}).append(s._nestElements(r(this),t)),s.element.append(e),r(this).nextUntil(this.nodeName.toLowerCase()).each(function(){0===r(this).find(s.options.selectors).length?r(this).filter(s.options.selectors).each(function(){r(this).is(i)||s._appendSubheaders.call(this,s,e)}):r(this).find(s.options.selectors).each(function(){r(this).is(i)||s._appendSubheaders.call(this,s,e)})}))})):s.element.addClass(n)},_setActiveElement:function(t){var e=this,s=d.location.hash.substring(1),i=e.element.find('li[data-unique="'+s+'"]');return s.length?(e.element.find("."+e.focusClass).removeClass(e.focusClass),i.addClass(e.focusClass),e.options.showAndHide&&i.click()):(e.element.find("."+e.focusClass).removeClass(e.focusClass),!s.length&&t&&e.options.highlightDefault&&e.element.find(u).first().addClass(e.focusClass)),e},_nestElements:function(e,t){var s,i,o;return(s=r.grep(this.items,function(t){return t===e.text()})).length?this.items.push(e.text()+t):this.items.push(e.text()),o=this._generateHashValue(s,e,t),i=r("<li/>",{class:f,"data-unique":o}).append(r("<a/>",{text:e.text()})),e.before(r("<div/>",{name:o,"data-unique":o})),i},_generateHashValue:function(t,e,s){var i="",o=this.options.hashGenerator;if("pretty"===o){for(i=e.text().toLowerCase().replace(/\s/g,"-");-1<i.indexOf("--");)i=i.replace(/--/g,"-");for(;-1<i.indexOf(":-");)i=i.replace(/:-/g,"-")}else i="function"==typeof o?o(e.text(),e):e.text().replace(/\s/g,"");return t.length&&(i+=""+s),i},_appendSubheaders:function(t,e){var s=r(this).index(t.options.selectors),i=r(t.options.selectors).eq(s-1),o=+r(this).prop("tagName").charAt(1),n=+i.prop("tagName").charAt(1);o<n?t.element.find(h+"[data-tag="+o+"]").last().append(t._nestElements(r(this),s)):o===n?e.find(u).last().after(t._nestElements(r(this),s)):e.find(u).last().after(r("<ul/>",{class:l,"data-tag":o})).next(h).append(t._nestElements(r(this),s))},_setEventHandlers:function(){var h=this;this.element.on("click.tocify","li",function(t){if(h.options.history&&(d.location.hash=r(this).attr("data-unique")),h.element.find("."+h.focusClass).removeClass(h.focusClass),r(this).addClass(h.focusClass),h.options.showAndHide){var e=r('li[data-unique="'+r(this).attr("data-unique")+'"]');h._triggerShow(e)}h._scrollTo(r(this))}),this.element.find("li").on({"mouseenter.tocify":function(){r(this).addClass(h.hoverClass),r(this).css("cursor","pointer")},"mouseleave.tocify":function(){"bootstrap"!==h.options.theme&&r(this).removeClass(h.hoverClass)}}),(h.options.extendPage||h.options.highlightOnScroll||h.options.scrollHistory||h.options.showAndHideOnScroll)&&r(d).on("scroll.tocify",function(){r("html, body").promise().done(function(){var o,t,e,s,n=r(d).scrollTop(),i=r(d).height(),a=r(c).height(),l=r("body")[0].scrollHeight;if(h.options.extendPage&&(h.webkit&&n>=l-i-h.options.extendPageOffset||!h.webkit&&i+n>a-h.options.extendPageOffset)&&!r(".tocify-extend-page").length){if(!(t=r('div[data-unique="'+r(u).last().attr("data-unique")+'"]')).length)return;e=t.offset().top,r(h.options.context).append(r("<div />",{class:p,height:Math.abs(e-n)+"px","data-unique":p})),h.extendPageScroll&&(s=h.element.find("li.active"),h._scrollTo(r('div[data-unique="'+s.attr("data-unique")+'"]')))}setTimeout(function(){var t,s=null,i=null,e=r(h.options.context).find("div[data-unique]");e.each(function(t){var e=Math.abs((r(this).next().length?r(this).next():r(this)).offset().top-n-h.options.highlightOffset);if(!(null==s||e<s))return!1;s=e,i=t}),t=r(e[i]).attr("data-unique"),o=r('li[data-unique="'+t+'"]'),h.options.highlightOnScroll&&o.length&&(h.element.find("."+h.focusClass).removeClass(h.focusClass),o.addClass(h.focusClass)),h.options.scrollHistory&&d.location.hash!=="#"+t&&d.location.replace("#"+t),h.options.showAndHideOnScroll&&h.options.showAndHide&&h._triggerShow(o,!0)},0)})})},show:function(t,e){var s=this;if(!t.is(":visible"))switch(t.find(h).length||t.parent().is(i)||t.parent().is(":visible")?t.children(h).length||t.parent().is(i)||(t=t.closest(h)):t=t.parents(h).add(t),s.options.showEffect){case"none":t.show();break;case"show":t.show(s.options.showEffectSpeed);break;case"slideDown":t.slideDown(s.options.showEffectSpeed);break;case"fadeIn":t.fadeIn(s.options.showEffectSpeed);break;default:t.show()}return t.parent().is(i)?s.hide(r(h).not(t)):s.hide(r(h).not(t.closest(i).find(h).not(t.siblings()))),s},hide:function(t){var e=this;switch(e.options.hideEffect){case"none":t.hide();break;case"hide":t.hide(e.options.hideEffectSpeed);break;case"slideUp":t.slideUp(e.options.hideEffectSpeed);break;case"fadeOut":t.fadeOut(e.options.hideEffectSpeed);break;default:t.hide()}return e},_triggerShow:function(t,e){return t.parent().is(i)||t.next().is(h)?this.show(t.next(h),e):t.parent().is(h)&&this.show(t.parent(),e),this},_addCSSClasses:function(){return"jqueryui"===this.options.theme?(this.focusClass="ui-state-default",this.hoverClass="ui-state-hover",this.element.addClass("ui-widget").find(".toc-title").addClass("ui-widget-header").end().find("li").addClass("ui-widget-content")):"bootstrap"===this.options.theme?(this.element.find(i+","+h).addClass("nav nav-list"),this.focusClass="active"):(this.focusClass="tocify-focus",this.hoverClass="tocify-hover"),this},setOption:function(){r.Widget.prototype._setOption.apply(this,arguments)},setOptions:function(){r.Widget.prototype._setOptions.apply(this,arguments)},_scrollTo:function(t){var e=this.options.smoothScroll||0,s=this.options.scrollTo,i=r('div[data-unique="'+t.attr("data-unique")+'"]');return i.length&&r("html, body").promise().done(function(){r("html, body").animate({scrollTop:i.offset().top-(r.isFunction(s)?s.call():s)+"px"},{duration:e})}),this}})}
//# sourceMappingURL=jquery.tocify.min.js.map